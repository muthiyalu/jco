"use strict";!function(){var t={menu:[{title:"Projects",id:"projects",submenu:[{title:"Project 1",id:"p1"},{title:"Project 2",id:"p2"},{title:"Project 3",id:"p3"}]},{title:"Writing",id:"writing",submenu:[{title:"Articles",id:"articles"},{title:"Theses",id:"theses"}]},{title:"Contact",id:"contact",submenu:[{title:"Social media",id:"socialmedia"},{title:"Email",id:"email"},{title:"Address",id:"address"}]}]},e=void 0,n=45e3,o=document.querySelector(".chat"),i=document.querySelector(".content"),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",n=document.createElement("li"),i=function(t,e){setTimeout(function(){t.classList.add("show")},150*e?150*e:10)},a=void 0,s=function(){o.scrollTop+=Math.floor(n.offsetHeight/18)};if(n.classList.add("message"),n.classList.add(e),n.innerHTML="user"===e?"<nav>"+t+"</nav>":"<p>"+t+"</p>",o.appendChild(n),a=window.setInterval(s,16),setTimeout(function(){window.clearInterval(a),o.scrollTop=o.scrollHeight},300),setTimeout(function(){n.classList.add("show")},10),"user"===e){for(var r=o.querySelectorAll("button:not(:disabled)"),c=0;c<r.length;c+=1)i(r[c],c);n.classList.add("active")}},s=function(t){return t[Math.floor(Math.random()*t.length)]},r=function(){var t=document.querySelector(".active"),e=["Did you fall asleep? &#x1F634;","Coffee break? &#x2615;","Still there?","&#x2744; &#x1F331; &#x1F31E; &#x1F342;"];t&&t.parentNode.removeChild(t),a(s(e),"bot"),setTimeout(function(){var t=['Don\'t like this conversation? Send an email to <a href="mailto:mike@redvolume.com">mike@redvolume.com</a> if you want a real one. &#x1F680;','Not finding what you\'re looking for? Send an email to <a href="mailto:mike@redvolume.com">mike@redvolume.com</a> with any questions...','Wanna talk to a real person? &#x1F4AC; Fire off an email to <a href="mailto:mike@redvolume.com">mike@redvolume.com</a>. &#x1F525;'];a(s(t),"bot"),setTimeout(function(){var t=["Where's the normal web page? &#x1F61E;","I want a regular web page &#x1F631;","Do you have a regular website? &#x1F63B;"],e=["Show me the options again please &#x2705;","Ok, go! &#x1F697;","I wanna check something &#x1F44D;"];a('<button class="choice newmenu showinfo">'+s(t)+'</button><br /><button class="choice newmenu showmenu">'+s(e)+"</button>")},300)},500)},c=function(){var t=["Hello! &#x1F44B; I'm Mike, a medical librarian working at Karolinska Institutet. I try to create the best user experiences possible, both physical and virtual, using humour, friendliness, web technologies and good design."];e=window.setInterval(function(){window.clearInterval(e),r()},n),a(s(t),"bot"),setTimeout(function(){var t=["Hey, tell me more! &#x1F680;","Hi! &#x1F440;","I'll bite &#x1F604;"];a('<button class="choice start">'+s(t)+"</button>")},300)},u=function(t){t.parentNode.parentNode.classList.add("selected"),t.parentNode.parentNode.classList.remove("active"),t.parentNode.parentNode.innerHTML="<p>"+t.textContent+"</p>"},l=function(i){var c="",l=o.querySelector("button.newmenu"),d=["Here's a few things that I can tell you about... &#x1F3A4;","Ok, check this out! &#x1F447;","Anything else you're interested in? &#x1F64F;"],m=["What would you like to know more about? &#x1F4A1;","Can I interest you in any of this? &#x1F4AF;","Select something of the following... &#x1F447;"];l&&u(l),setTimeout(function(){i?a(s(d),"bot"):a(s(m),"bot"),t.menu.forEach(function(t,e){c+='<button class="choice menu" data-submenu="'+e+'">'+t.title+"</button>"}),setTimeout(function(){a(c)},300)},500),e=window.setInterval(function(){window.clearInterval(e),r()},n)},d=function(e){var n="",o=t.menu[e.getAttribute("data-submenu")],i=["&#x1F44D; Here's what I have on that...","See anything interesting? &#x1F648;","Any of this cool?"],r=["I wanna read about something other than "+o.title.toLowerCase()+" &#x1F61C;","Show me the menu again &#x1F60B;",o.title+" was interesting, but show me something else... &#x1F612;"];o.submenu.forEach(function(t){var e=o.id+"-"+t.id;n+='<button class="choice submenu" aria-controls="'+e+'" data-content="'+e+'">'+t.title+"</button>"}),n+='<br /><button class="choice submenu newmenu">'+s(r)+"</button>",setTimeout(function(){a(s(i),"bot"),setTimeout(function(){a(n)},300)},500)},m=function(t){var e=o.querySelectorAll("button");t?(t.classList.add("show"),o.setAttribute("aria-hidden","true"),i.setAttribute("aria-hidden","false"),i.tabIndex="0",i.focus()):(i.setAttribute("aria-hidden","true"),i.tabIndex="-1",o.setAttribute("aria-hidden","false"),history.state&&"content"===history.state.id&&history.back(),setTimeout(function(){var t=document.querySelector(".content article.show");t&&(t.classList.remove("show"),o.querySelector('button[data-content="'+t.id+'"]').focus())},300));for(var n=0;n<e.length;n+=1)e[n].tabIndex=t?"-1":"0"},h=function(t){t.classList.contains("newmenu")?l(!0):(m(document.getElementById(t.getAttribute("data-content"))),history.pushState({id:t.getAttribute("data-content")},"","#"+t.getAttribute("data-content")))};document.addEventListener("click",function(t){t.target.classList.contains("choice")&&(window.clearInterval(e),t.target.classList.contains("submenu")||u(t.target),t.target.classList.contains("menu")&&d(t.target),t.target.classList.contains("submenu")&&h(t.target),t.target.classList.contains("start")&&l(),t.target.classList.contains("showmenu")&&l(!0),t.target.classList.contains("showinfo")&&!function(){var t=["Here's my website ","Here you go: ","Check this one out "],e=["OK &#x1F60E;","How do I get back? &#x1F312;","Ok, thanks! &#x1F44C;"];setTimeout(function(){a(s(t)+' <a target="_new" href="https://librarian.codes">https://librarian.codes</a>',"bot"),setTimeout(function(){a('<button class="choice newmenu showmenu">'+s(e)+"</button>")},300)},500)}()),t.target.classList.contains("close")&&(t.preventDefault(),history.back())}),document.addEventListener("keydown",function(t){27===t.keyCode&&"false"===i.getAttribute("aria-hidden")&&history.back()}),window.addEventListener("popstate",function(t){m(t.state&&t.state.id&&document.getElementById(t.state.id)?document.getElementById(t.state.id):"")}),setTimeout(function(){c()},500),document.getElementById(window.location.hash.split("#")[1])&&!function(){var t=window.location.hash.split("#")[1];history.replaceState("","","."),setTimeout(function(){m(document.getElementById(t)),history.pushState({id:t},"","#"+t)},10)}()}();